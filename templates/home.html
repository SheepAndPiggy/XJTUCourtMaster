{% extends "base.html" %}
{% block title %}ä¸»é¡µ - XJTUCourtMaster{% endblock %}

{% block head_extra %}
<style>
    /* æœç´¢åŒº */
    .search-wrap{
        display:flex; gap:10px; align-items:center; margin-bottom:16px;
    }
    .search-input{
        flex:1; padding:10px 12px; border-radius:12px; border:1px solid var(--border);
        background:#0a1526; color:var(--text); outline:none;
        transition: box-shadow .2s ease, border-color .2s ease;
    }
    .search-input:focus{ border-color: rgba(6,182,212,.45); box-shadow: 0 0 0 3px rgba(6,182,212,.15); }

    /* ç€‘å¸ƒæµå®¹å™¨ï¼ˆçº¯ CSS columnsï¼‰ */
    .masonry{
        column-gap:16px;
    }
    @media (max-width:639px){ .masonry{ columns:1; } }
    @media (min-width:640px) and (max-width:1023px){ .masonry{ columns:2; } }
    @media (min-width:1024px){ .masonry{ columns:3; } }

    /* å¡ç‰‡ */
    .venue-card{
        break-inside: avoid; display:inline-block; width:100%;
        background: var(--card); border:1px solid var(--border);
        border-radius:16px; overflow:hidden; margin:0 0 16px;
        text-decoration:none; color:var(--text);
        box-shadow: var(--shadow); transform: translateY(0); transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .venue-card:hover{
        transform: translateY(-2px);
        border-color: rgba(6,182,212,.35);
        box-shadow: 0 12px 32px rgba(6,182,212,.08), var(--shadow);
    }
    .venue-cover{
        width:100%; aspect-ratio: 16/9; object-fit: cover; background:#0a1526;
    }
    .venue-body{ padding:12px 14px 14px; }
    .venue-title{ font-weight:800; font-size:18px; margin-bottom:6px; letter-spacing:.2px; }
    .venue-note{ color:var(--muted); font-size:14px; line-height:1.6; margin-bottom:10px; }
    .meta{ display:flex; flex-wrap:wrap; gap:8px; }
    .badge{
        display:inline-flex; align-items:center; gap:6px; font-size:12px; font-weight:700; letter-spacing:.2px;
        padding:6px 8px; border-radius:10px; border:1px solid rgba(255,255,255,.08);
        background: linear-gradient(180deg, rgba(6,182,212,.14), rgba(132,204,22,.12));
    }
</style>
{% endblock %}

{% block page_header %}
<div class="page-header">
    <div>
        <div class="page-title">ğŸ¸ æ¬¢è¿æ¥åˆ°XJTUCourtMaster</div>
        <div class="page-sub">ä»è¿™é‡Œå¿«é€Ÿé¢„çº¦åœºåœ°</div>
    </div>
    <div class="page-actions">
        <a class="btn" href="{{ url_for('session_manage') }}">å‰å¾€åœºæ¬¡ç®¡ç†</a>
    </div>
</div>
{% endblock %}

{% block content %}
<!-- æœç´¢æ¡†ï¼ˆGET æäº¤åˆ°ä¸»é¡µï¼‰ï¼Œæ”¯æŒæ˜¾ç¤ºå½“å‰å…³é”®å­—ä¸æ¸…ç©º -->
<form class="search-wrap" method="get" action="{{ url_for('home') }}">
    <input class="search-input" type="text" name="q"
           value="{{ request.args.get('q','') }}" placeholder="æœç´¢åœºé¦†åç§°æˆ–å¤‡æ³¨â€¦" />
    <button class="btn" type="submit">æœç´¢</button>
    {% if request.args.get('q') %}
    <a class="btn" href="{{ url_for('home') }}">æ¸…ç©º</a>
    {% endif %}
</form>

<!-- ç€‘å¸ƒæµå¡ç‰‡åˆ—è¡¨ -->
<div class="masonry">
    {% for v in venues %}
    <a class="venue-card" href="{{ url_for('venue_detail', venue_id=(v.id | int)) }}" title="æŸ¥çœ‹è¯¦æƒ…ï¼š{{ v.name }}">
        <img class="venue-cover"
             src="{{ v.image or url_for('static', filename='img/placeholder.png') }}"
             alt="{{ v.name }} åœºé¦†å›¾ç‰‡"
             loading="lazy" decoding="async"
             onerror="if(!this.dataset.fallback){this.dataset.fallback=1;this.src='{{ url_for('static', filename='placeholder.jpg') }}'}">

        <div class="venue-body">
            <div class="venue-title">{{ v.name }}</div>
            {% if v.address %}<div class="venue-note">{{ v.address }}</div>{% endif %}
            <div class="meta">
                <span class="badge">å¯æå‰é¢„çº¦ {{ v.advanceday }} å¤©</span>
                <span class="badge">æœ€å¤šé¢„çº¦ {{ v.advancenum }} åœº</span>
            </div>
        </div>
    </a>
    {% else %}
    <div class="flash info">æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„åœºé¦†ã€‚</div>
    {% endfor %}
</div>
{% endblock %}
